# @train_custom_loop.py#L31 max_iters(1エポック内の学習パラメータ更新回数を)このような式で計算しているの？

ご質問ありがとうございます。その式は、「手持ちのデータをすべて読み終えるのに、何回『前進』する必要があるか」 を計算しています。

ざっくりイメージ（例え話）
「長い巻き物を、みんなで分担して読む」 シーンを想像してください。

全体 (data_size): 1,000文字の長い巻き物があります。
分担 (batch_size): これを10人で等分して読みます。1人あたり 100文字 (data_size / batch_size) 担当します。
1回の進み具合 (time_size): 全員、「せーの」で 5文字ずつ 読み進めます。
さて、全員が自分の担当分（100文字）を読み終えるには、「せーの」を何回やる必要があるでしょうか？

$$ 
100 \text{文字} \div 5 \text{文字/回} = 20 \text{回} 
$$

これと同じ計算を式にしたのが、質問のコードです。

式の分解
$$ \text{max_iters} = \frac{\text{data_size}}{\text{batch_size} \times \text{time_size}} $$

これは、以下のように分解して考えるとわかりやすいです。

data_size // batch_size:
データ全体をバッチ数で割ることで、「1つのバッチ（1つの並列ライン）が担当するデータの長さ」 を出しています。（例え話での「1人あたり100文字」）
... // time_size:
その担当分の長さを、1回の処理で進む長さ（time_size）で割ることで、「何回ステップを踏めば最後まで到達するか」 を出しています。
まとめ
その式は、「データをバッチ分割し、さらに時間方向にブロック分割した結果、全部で何ブロック分の処理が必要か」 を求めています。